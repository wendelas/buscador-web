<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">
	<rich:panel id="painelEmails" styleClass="panelInterno">
		<f:facet name="header">
			<h:outputText>E-mails:</h:outputText>
		</f:facet>
		<!-- Despesa: Lista =============================================================================== -->
		<rich:dataTable id="emails" width="100%"
			value="#{emailBean.itens}" var="email" rowKeyVar="index"
			rendered="#{not empty emailBean.itens.wrappedData}"
			columnClasses="fieldPadding, fieldPadding, fieldPadding, noStyleClass">
			<rich:column style="width:55%" sortBy="#{email.email}">
				<f:facet name="header">
					<h:outputText value="E-mail" />
				</f:facet>
				<a4j:commandLink id="editarEndLinkEmail"
					action="#{emailBean.editar}" immediate="true"
					oncomplete="Richfaces.showModalPanel('emailPanel'); return false;"
					reRender="emailPanel, messagesEmailsPanel">
					<h:outputText value="#{email.email}" />
				</a4j:commandLink>	
			</rich:column>
			<rich:column style="width:23%" sortBy="#{email.descricaoTipo}">
				<f:facet name="header">
					<h:outputText value="Tipo" />
				</f:facet>
				<a4j:commandLink id="editarEmailLinkTipo"
					action="#{emailBean.editar}" immediate="true"
					oncomplete="Richfaces.showModalPanel('emailPanel'); return false;"
					reRender="emailPanel, messagesEmailsPanel">
					<h:outputText value="#{email.descricaoTipo}" />
				</a4j:commandLink>				
			</rich:column>		
			<rich:column style="width:10%" sortBy="#{email.principal}">
				<f:facet name="header">
					<h:outputText value="Principal" />
				</f:facet>
					<a4j:commandLink id="editarEmailLinkPrin"
						action="#{emailBean.editar}" immediate="true"
						oncomplete="Richfaces.showModalPanel('emailPanel'); return false;"
						reRender="emailPanel, messagesEmailsPanel">
						<h:outputText value="#{email.principal ? 'Sim' : 'Não'}" />
					</a4j:commandLink>				
			</rich:column>				
			<rich:column style="width:10%" sortBy="#{email.situacao}">
				<f:facet name="header">
					<h:outputText value="Situação" />
				</f:facet>
					<a4j:commandLink id="editarEmailLinkSit"
						action="#{emailBean.editar}" immediate="true"
						oncomplete="Richfaces.showModalPanel('emailPanel'); return false;"
						reRender="emailPanel, messagesEmailsPanel">
						<h:outputText value="#{email.situacao ? 'Ativo' : 'Inativo'}" />
					</a4j:commandLink>				
			</rich:column>					
			<rich:column style="width:2%" rendered="#{pessoaBean.permiteEdicao}">
				<f:facet name="header">
					<a4j:commandLink id="novoEmailLink"
						action="#{emailBean.novo}" immediate="true"
						oncomplete="Richfaces.showModalPanel('emailPanel'); return false;"
						reRender="emailPanel">
						<h:graphicImage url="/common/images/bt_incluir.gif"
							style="border: none" title="Novo"/>
					</a4j:commandLink>
				</f:facet>
				<a4j:commandLink id="removerEmailLink"
					action="#{emailBean.remover}"
					reRender="painelEmails, messagesEmailsPanel"
					onclick="if (!confirm('Deseja excluir o e-mail?')) return false;">
					<h:graphicImage url="/common/images/bt_excluir.gif"
						style="border: none" title="Excluir" />
				</a4j:commandLink>
			</rich:column>			
		</rich:dataTable>
		<h:outputText rendered="#{empty emailBean.itens.wrappedData}">
			<p class="note"><i><b>E-mails:</b> Não há e-mails
			associados a essa pessoa. Clique <b> <a4j:commandLink
				id="novoEmailLink" action="#{emailBean.novo}" value="aqui"
				immediate="true"
				oncomplete="Richfaces.showModalPanel('emailPanel'); return false;"
				reRender="emailPanel" /> </b> para criar e associar um novo e-mail.
			</i></p>
		</h:outputText>
	</rich:panel>
</ui:composition>
