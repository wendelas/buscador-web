<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:h="http://java.sun.com/jsf/html"
      	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://java.sun.com/jstl/core" lang="pt">
	 <h:form id="loginForm">
	 	<h:inputHidden  id="url" value="#{loginBean.url}" />
	 	<a4j:outputPanel id="messages">			
		<t:messages id="msg_login" forceId="true" style="width:auto"
			errorClass="erro_login" 
			errorStyle="color: red;" 
			layout="table"/>
		</a4j:outputPanel>
		<table class="login_box">
			<tr>
				<td style="text-align:right">
					<h:outputLabel for="login" value="Usuário:" styleClass="labelClass" />
				</td>
				<td>
					<h:inputText  id="login" value="#{loginBean.login}" styleClass="campo_formulario" size="16" maxlength="50"></h:inputText>
				</td>
			</tr><tr>
				<td style="text-align:right">
					<h:outputLabel for="senha" value="Senha:" styleClass="labelClass" />
				</td>				
				<td>
				<h:inputSecret id="senha" value="#{loginBean.senha}" styleClass="campo_formulario" size="16" maxlength="50"></h:inputSecret>
				</td>
			</tr>
		</table>
		<table class="login_box_semtopo">
			<tr>
				<td style="text-align:right">${initParam['versao_sistema']}</td>
			</tr>
		</table>
		<p>
			<h:commandButton  action="#{loginBean.login}" immediate="false"  styleClass="botao_login" id="botao_salvar" value="Entrar" />			
			<a4j:commandButton  action="#{loginBean.alteraSenha}" immediate="false"  reRender="messages" styleClass="botao_login" id="botao_alt_senha" value="Alterar Senha" />
			<input name="botao_voltar" type="reset" class="botao_login" id="botao_voltar" value="Limpar" />
		</p>
	</h:form>
	<script language="JavaScript" type="text/javascript" charset="ISO-8859-1">
	//<![CDATA[
		function validar(e) {
			var validou = true;
			if (document.getElementById('loginForm:login').value.length == 0) {
				alert('O campo Usuário deve ser informado.');
				if (!e) {
					loginForm.elements['loginForm:login'].focus();
				}
				validou = false;
			}else if (document.getElementById('loginForm:senha').value.length == 0) {
				alert('O campo Senha deve ser informado.');
				if (!e) {
					loginForm.elements['loginForm:senha'].focus();
				}
				validou = false;
			}

			if (!validou) {
				if (e && e.preventDefault) {
					e.preventDefault(); // DOM style
				}
			}

			return validou;			
		}

		addEvent(document.forms[0], "submit", validar);		
		foco('loginForm:login');
		//]]>		
	</script>	
</ui:composition>			
