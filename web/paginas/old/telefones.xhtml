<?xml version="1.0" encoding="ISO-8859-1"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:metrologia="http://cni.org.br/metrologia" 
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">
	<rich:panel id="painelTelefones" styleClass="panelInterno">
		<f:facet name="header">
			<h:outputText>Telefones:</h:outputText>
		</f:facet>
		<!-- Despesa: Lista =============================================================================== -->
		<rich:dataTable id="telefones" width="100%"
			value="#{telefoneBean.itens}" var="tel" rowKeyVar="index"
			rendered="#{not empty telefoneBean.itens.wrappedData}"
			columnClasses="fieldPadding, fieldPadding, fieldPadding, noStyleClass">
			<rich:column style="width:55%" sortBy="#{tel.numero}">
				<f:facet name="header">
					<h:outputText value="Telefone" />
				</f:facet>
				<a4j:commandLink id="editarEndLinkTel"
					action="#{telefoneBean.editar}" immediate="true"
					oncomplete="Richfaces.showModalPanel('telefonePanel'); return false;"
					reRender="telefonePanel, messagesTelefonesPanel">
					<h:outputText value="#{metrologia:mascaraTelefone(tel.numero)}" />
				</a4j:commandLink>	
			</rich:column>
			<rich:column style="width:23%" sortBy="#{tel.descricaoTipo}">
				<f:facet name="header">
					<h:outputText value="Tipo" />
				</f:facet>
				<a4j:commandLink id="editarTelLinkTipo"
					action="#{telefoneBean.editar}" immediate="true"
					oncomplete="Richfaces.showModalPanel('telefonePanel'); return false;"
					reRender="telefonePanel, messagesTelefonesPanel">
					<h:outputText value="#{tel.descricaoTipo}" />
				</a4j:commandLink>				
			</rich:column>	
			<rich:column style="width:10%" sortBy="#{tel.principal}">
				<f:facet name="header">
					<h:outputText value="Principal" />
				</f:facet>
					<a4j:commandLink id="editarTelLinkPrin"
						action="#{telefoneBean.editar}" immediate="true"
						oncomplete="Richfaces.showModalPanel('telefonePanel'); return false;"
						reRender="telefonePanel, messagesTelefonesPanel">
						<h:outputText value="#{tel.principal ? 'Sim' : 'Não'}" />
					</a4j:commandLink>				
			</rich:column>				
			<rich:column style="width:10%" sortBy="#{tel.situacao}">
				<f:facet name="header">
					<h:outputText value="Situação" />
				</f:facet>
					<a4j:commandLink id="editarTelLinkSit"
						action="#{telefoneBean.editar}" immediate="true"
						oncomplete="Richfaces.showModalPanel('telefonePanel'); return false;"
						reRender="telefonePanel, messagesTelefonesPanel">
						<h:outputText value="#{tel.situacao ? 'Ativo' : 'Inativo'}" />
					</a4j:commandLink>				
			</rich:column>					
			<rich:column style="width:2%" rendered="#{pessoaBean.permiteEdicao}">
				<f:facet name="header">
					<a4j:commandLink id="novoTelLink"
						action="#{telefoneBean.novo}" immediate="true"
						oncomplete="Richfaces.showModalPanel('telefonePanel'); return false;"
						reRender="telefonePanel">
						<h:graphicImage url="/common/images/bt_incluir.gif"
							style="border: none" title="Novo"/>
					</a4j:commandLink>
				</f:facet>
				<a4j:commandLink id="removerTelLink"
					action="#{telefoneBean.remover}"
					reRender="painelTelefones, messagesTelefonesPanel"
					onclick="if (!confirm('Deseja excluir o telefone?')) return false;">
					<h:graphicImage url="/common/images/bt_excluir.gif"
						style="border: none" title="Excluir" />
				</a4j:commandLink>
			</rich:column>			
		</rich:dataTable>
		<h:outputText rendered="#{empty telefoneBean.itens.wrappedData}">
			<p class="note"><i><b>Telefones:</b> Não há telefones
			associados a essa pessoa. Clique <b> <a4j:commandLink
				id="novoTelefoneLink" action="#{telefoneBean.novo}" value="aqui"
				immediate="true"
				oncomplete="Richfaces.showModalPanel('telefonePanel'); return false;"
				reRender="telefonePanel" /> </b> para criar e associar um novo telefone.
			</i></p>
		</h:outputText>
	</rich:panel>
</ui:composition>
