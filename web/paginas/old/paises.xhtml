<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">
	<ui:composition
	template="/common/decorators/arearestrita/template.xhtml">
		<ui:define name="title">Sistema de Gestão de Volumes - Pesquisa de Países...</ui:define>
		<ui:define name="body">
				
			<h:form id="pesquisaPaisesForm" class="defaultFormClass">
				<h1 class="cont"><span>Pesquisa de Países</span></h1>
				<rich:panel styleClass="viewContent">
					<!-- ================================================================================================= -->
					<!-- Pesquisa: Filtros =============================================================================== -->			  
					<rich:panel id="filtrosPesquisa">
						<f:facet name="header">
							<h:outputText value="Filtros de Pesquisa" />
						</f:facet>
									
						<h:panelGrid styleClass="fullWidthClass">
							<h:panelGrid columns="3" styleClass="formClass" columnClasses="fullWidthClass, noStyleClass, noStyleClass">
								<h:panelGrid columns="2" styleClass="noCellBorderClass fullWidthClass fieldPadding" columnClasses="noStyleClass,fullWidthClass fieldPadding">
									<h:outputText value="País:" styleClass="labelClass"/>
									<h:inputText id="textoConsulta" value="#{paisBean.voLocalizacao.textoConsulta}" maxlength="50" styleClass="inputTextClass  fullWidthClass"/>
								</h:panelGrid>
								<a4j:commandButton id="pesquisar" type="submit" value="Pesquisar" action="#{paisBean.pesquisar}" reRender="resultadoPesquisa" styleClass="buttonClass"/>
								<a4j:commandButton id="limpar" value="Limpar" action="#{paisBean.reset}" reRender="filtrosPesquisa, resultadoPesquisa, messages" styleClass="buttonClass"/>
							</h:panelGrid>
						</h:panelGrid>
					</rich:panel>
					
					<rich:spacer height="6"/>
					
					<a4j:outputPanel id="resultadoPesquisa">
						<rich:panel rendered="#{paisBean.paises != null}">
							<f:facet name="header">
								<h:outputText value="Resultado da Pesquisa" />
							</f:facet>
	
							<rich:dataTable id="paises" rows="#{globalBean.defaultPageSize}" value="#{paisBean.paises}" var="pais" rowKeyVar="index"
							rendered="#{not empty paisBean.paises.wrappedData}" styleClass="fullWidthClass" columnClasses="fullWidthClass,noWrapClass,noWrapClass,noStyleClass">
								<rich:column sortBy="#{pais.descricaoAbreviada}">
									<f:facet name="header"><h:outputText styleClass="headerText" value="País"/></f:facet>																									
									<a4j:htmlCommandLink id="editar" action="#{paisBean.editar}" immediate="true">
										<h:outputText value="#{pais.descricaoAbreviada}"/>
									</a4j:htmlCommandLink>
								</rich:column>								
								<rich:column>
									<f:facet name="header"><h:outputText value=""/></f:facet>
									<a4j:commandLink id="remover" action="#{paisBean.remover}"  reRender="filtrosPesquisa, resultadoPesquisa, messages"  onclick="if (!confirm('Deseja realmente excluir o país?')) return false;">
										<h:graphicImage url="/common/images/bt_excluir.gif" style="border: none"/>
									</a4j:commandLink>
								</rich:column>
								<f:facet name="footer">
									<rich:datascroller/>
								</f:facet>					
							</rich:dataTable>
							<h:outputText rendered="#{paisBean.paises.rowCount == 0}">
								<p class="note">
									<i><b>Resultado:</b> Nenhum país encontrado para os termos de sua consulta. 
									Por favor, tente novamente ou efetue um 
									<b><h:commandLink action="#{paisBean.novo}">Novo</h:commandLink></b>
									cadastro. 
									</i>			 
								</p>
							</h:outputText>
						</rich:panel>
					</a4j:outputPanel>
					
					<rich:spacer height="6"/>
					
					<rich:panel>
						<h:panelGrid columns="3" columnClasses="noStyleClass, fullWidthClass, noStyleClass">
							<h:commandButton id="novoPais" value="Novo País" action="#{paisBean.novo}" styleClass="buttonClass"/> <h:outputText/>
							<h:commandButton value="Cancelar" action="/view/caixaentrada/caixaPessoal.faces" immediate="true" styleClass="buttonClass"/>
						</h:panelGrid>
					</rich:panel>
					
				</rich:panel>
			</h:form>
		</ui:define>	
	</ui:composition>	
</html>