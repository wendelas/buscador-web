<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich" template="comum/template.xhtml">

	<ui:define name="body">
		<rich:panel header="Consulta termos mais frequentes"
			style="margin-left: 30%; margin-right: 30%;">

			<rich:panel cols="2">
				<f:facet name="header">
					<h:outputText styleClass="headerText"
						value="Quantidade de ocorrências" />
				</f:facet>
				<h:outputText value="Mínimo:" />
				<h:inputText value="#{frequenciaDosTermosBean.limite}" size="6" />
				<h:commandButton value="Consultar" type="submit"
					action="#{frequenciaDosTermosBean.carregarDados}" reRender="termos" />
			</rich:panel>

			<br />

			<rich:panel>
				<h:panelGrid columns="2">
					<h:outputText value="Acórdãos Indexados:" />
					<h:outputText
						value="#{frequenciaDosTermosBean.totalAcordaosIndexados}" />
					<h:outputText value="Termos Processados:" />
					<h:outputText
						value="#{frequenciaDosTermosBean.totalTermosIndexados}" />
				</h:panelGrid>
			</rich:panel>

			<br />

			<!-- rich:panel>
				<f:facet name="header">
					<h:outputText styleClass="headerText"
						value="Campos disponíveis para consulta" />
				</f:facet>

				<h:selectManyListbox required="true" label="Lista de campos"
					value="#{frequenciaDosTermosBean.camposSelecionados}" size="7">
					<c:forEach items="#{frequenciaDosTermosBean.camposDisponiveis}"
						var="item">
						<f:selectItem itemValue="#{item}" itemLabel="#{item}" />
					</c:forEach>
				</h:selectManyListbox>
			</rich:panel>

			<br /-->

			<rich:panel>
				<h:outputText
					value="Serão mostrados apenas os termos com a quantidade mínima de ocorrências nos campos selecionados." />
			</rich:panel>

			<br />
			<rich:separator height="2" lineType="dotted" />
			<br />

			<rich:panel header="Termos mais frequentes" id="termos"
				rendered="#{frequenciaDosTermosBean.termos.size() > 0}">

				<rich:dataTable value="#{frequenciaDosTermosBean.termos}" rows="20"
					var="termo">
					<rich:column sortBy="#{termo.termo}">
						<f:facet name="header">
							<h:outputText styleClass="headerText" value="Termo" />
						</f:facet>
						<h:outputText value="#{termo.termo}" />
					</rich:column>
					<rich:column sortBy="#{termo.frequencia}">
						<f:facet name="header">
							<h:outputText value="Frequência" />
						</f:facet>
						<h:outputText value="#{termo.frequencia}" />
					</rich:column>
					<f:facet name="footer">
						<rich:datascroller />
					</f:facet>
				</rich:dataTable>
			</rich:panel>

			<rich:panel>
				<h:outputText styleClass="headerText"
					rendered="#{frequenciaDosTermosBean.termos.size() == 0}"
					value="Não foi encontrado nenhum registro para a quantidade informada. Tente diminuir a quantidade mínima de ocorrências." />
			</rich:panel>

		</rich:panel>
	</ui:define>
</ui:composition>
